# sidekiq process

# NOTE: this config assumes that `config/sidekiq.yml` declares
# that the pid at tmp/pids/sidekiq.pid
#
#
# Example sidekiq.yml:
#
# :concurrency: 5
# :pidfile: tmp/pids/sidekiq.pid
# staging:
# production:
# :queues:
#   - default

processes:
  - name: sidekiq
    config:
      start_command: bundle exec sidekiq --config config/sidekiq.yml --daemon --logfile log/sidekiq.log
      stop_command: bundle exec sidekiqctl shutdown tmp/pids/sidekiq.pid
      user_commands:
        rotate: "kill -USR2 {PID}" # Requires eye >= 0.6.4
      stdall: log/sidekiq.log
      pid_file: tmp/pids/sidekiq.pid
